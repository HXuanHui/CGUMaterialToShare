C51 COMPILER V9.60.0.0   BUTTON_PUSH_LED                                                   11/03/2022 15:39:14 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE BUTTON_PUSH_LED
OBJECT MODULE PLACED IN button_push_LED.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\c51.exe button_push_LED.c DB OE BR INCDIR(C:\SiLabs\MCU\Inc)

line level    source

   1          #include "C8051F040.h"
   2          
   3          void
   4          Port_Configuration ()
   5          {
   6   1              XBR2 = 0xc0;
   7   1              P1MDIN = 0xff;
   8   1              P2MDOUT = 0xff;
   9   1      }//end of function Port_Configuration
  10          
  11          void
  12          Default_Config ()
  13          {
  14   1              //turn-off watch-dog timer
  15   1              // disable watchdog timer
  16   1              WDTCN = 0xde;
  17   1              WDTCN = 0xad;
  18   1      
  19   1              //initialize SFR setup page
  20   1              SFRPAGE = CONFIG_PAGE;                 // Switch to configuration page
  21   1      
  22   1              Port_Configuration ();
  23   1      
  24   1              //set to normal mode
  25   1              SFRPAGE = LEGACY_PAGE;
  26   1      }//end of function Default_Config
  27          
  28          
  29          /****************
  30          There are something wrong with the function below!
  31          Please see the following hints:
  32          1. See the error message and fix those errors
  33          2. The initiailization of N
  34          3. The initialization of P1
  35          ****************/
  36          void
  37          button_detect ()
  38          {
  39   1              char key_hold;
  40   1              int key_release;
  41   1      
  42   1              do {
  43   2                      key_hold = P1;
  44   2              } while (!key_hold);
  45   1      
  46   1              //Stage 2: wait for key released
  47   1              key_release = 0;
  48   1              count = N;
*** ERROR C202 IN LINE 48 OF button_push_LED.c: 'count': undefined identifier
  49   1              while (!key_release) {
  50   2                      key_hold = P1;
  51   2                      if (key_hold) {
  52   3                              count = N;
*** ERROR C202 IN LINE 52 OF button_push_LED.c: 'count': undefined identifier
  53   3                      }
C51 COMPILER V9.60.0.0   BUTTON_PUSH_LED                                                   11/03/2022 15:39:14 PAGE 2   

  54   2                      else {
  55   3                              count--;
*** ERROR C202 IN LINE 55 OF button_push_LED.c: 'count': undefined identifier
  56   3                              if (count==0) key_release = 1;
*** ERROR C202 IN LINE 56 OF button_push_LED.c: 'count': undefined identifier
  57   3                      }
  58   2              }//Stage 2: wait for key released
  59   1      }//end of function button_detect ()
  60          
  61          int
  62          main ()
  63          {
  64   1              int status;
  65   1      
  66   1              Default_Config ();
  67   1      
  68   1              status = 1;
  69   1              P2 = status;
  70   1      
  71   1              while (1) {
  72   2                      button_detect ();
  73   2                      status++;
  74   2                      P2 = status;
  75   2              }//end while (1)
  76   1      }//end of function main

C51 COMPILATION COMPLETE.  0 WARNING(S),  4 ERROR(S)
